<div class="flex h-screen w-full flex-col overflow-hidden">
  <app-setup-header />
  <div class="flex flex-1 overflow-hidden relative">
    <app-setup-sidebar
      [activeStep]="activeComponent()"
      [stepStatuses]="stepStatuses()"
      [progress]="progress()"
    />
    <main
      class="flex-1 overflow-y-auto bg-background-light dark:bg-background-dark p-4 lg:p-8 relative"
    >
      @switch (activeComponent()) {
        @case ('rules') {
          <app-setup-rules
            [data]="setupData()"
            (advanced)="advanced($event)"
            (dataUpdate)="updateData($event)"
          />
        }
        @case ('format') {
          <app-setup-format
            [data]="setupData()"
            (advanced)="advanced($event)"
            (dataUpdate)="updateData($event)"
          />
        }
        @case ('structure') {
          <app-setup-format-knockout
            [totalTeams]="setupData().structure?.totalTeams || 16"
            (updatePhaseConfigs)="updatePhaseConfigs($event)"
          />
          <div class="mt-8 max-w-[1000px] mx-auto flex justify-end items-center relative z-50">
            <button
              type="button"
              (click)="advanced('format')"
              class="flex items-center gap-2 px-6 py-3 rounded-full text-secondary hover:text-primary hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors font-medium text-sm"
            >
              <span class="material-symbols-outlined text-lg">arrow_back</span>
              Voltar
            </button>
            <button
              type="button"
              (click)="advanced('teams')"
              class="flex items-center gap-2 px-8 py-3 rounded-full bg-primary hover:bg-primary-dark text-white shadow-lg shadow-primary/20 transition-all transform hover:-translate-y-0.5 font-bold text-sm ml-4"
            >
              Pr√≥ximo: Equipes
              <span class="material-symbols-outlined text-lg">arrow_forward</span>
            </button>
          </div>
        }
        @case ('teams') {
          <app-setup-add-teams
            [data]="setupData()"
            (advanced)="advanced($event)"
            (dataUpdate)="updateData($event)"
          />
        }
        @case ('final_review') {
          <app-setup-final-review [data]="setupData()" (advanced)="advanced($event)" />
        }
      }
    </main>
  </div>
</div>
