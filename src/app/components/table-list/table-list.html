<div
  class="bg-white dark:bg-surface-dark rounded-xl shadow-sm border border-gray-100 dark:border-gray-800 overflow-hidden flex flex-col"
>
  <div class="overflow-x-auto custom-scrollbar">
    <table class="w-full text-left border-collapse">
      <thead>
        <tr class="border-b border-gray-100 dark:border-gray-800 bg-gray-50/50 dark:bg-white/5">
          @for (column of columns(); track column.key) {
            <th
              class="py-4 px-6 text-xs font-semibold text-text-muted uppercase tracking-wider"
              [class]="column.width ? 'w-[' + column.width + ']' : ''"
              [class.text-right]="column.align === 'right'"
              [class.text-center]="column.align === 'center'"
            >
              {{ column.label }}
            </th>
          }
          @if (hasActions()) {
            <th
              class="py-4 px-6 text-xs font-semibold text-text-muted uppercase tracking-wider text-right w-[20%]"
            >
              Ações
            </th>
          }
        </tr>
      </thead>
      <tbody class="divide-y divide-gray-100 dark:divide-gray-800">
        @if (isLoading()) {
          <!-- Skeleton Loading -->
          @for (skeleton of [1, 2, 3, 4, 5]; track skeleton) {
            <tr class="animate-pulse">
              @for (column of columns(); track column.key) {
                <td class="py-4 px-6">
                  <div class="h-4 bg-gray-200 dark:bg-gray-700 rounded"></div>
                </td>
              }
              @if (hasActions()) {
                <td class="py-4 px-6 text-right">
                  <div class="flex items-center justify-end gap-2">
                    <div class="size-8 bg-gray-200 dark:bg-gray-700 rounded"></div>
                  </div>
                </td>
              }
            </tr>
          }
        } @else if (data().length === 0) {
          <!-- Empty State -->
          <tr>
            <td
              [attr.colspan]="columns().length + (hasActions() ? 1 : 0)"
              class="py-12 px-6 text-center"
            >
              <div class="flex flex-col items-center gap-2">
                <span class="material-symbols-outlined text-4xl text-gray-400">inbox</span>
                <p class="text-sm text-text-muted">{{ emptyMessage() }}</p>
              </div>
            </td>
          </tr>
        } @else {
          <!-- Data Rows -->
          @for (row of data(); track $index) {
            <tr class="group hover:bg-gray-50 dark:hover:bg-white/5 transition-colors">
              @for (column of columns(); track column.key) {
                <td
                  class="py-4 px-6"
                  [class.text-right]="column.align === 'right'"
                  [class.text-center]="column.align === 'center'"
                >
                  @if (isHtmlContent(column)) {
                    <!-- Renderização customizada via função (HTML) -->
                    <div [innerHTML]="renderCell(column, row)"></div>
                  } @else {
                    <!-- Renderização padrão (texto) -->
                    {{ renderCell(column, row) }}
                  }
                </td>
              }
              @if (hasActions()) {
                <td class="py-4 px-6 text-right">
                  <div class="flex items-center justify-end gap-2">
                    @for (action of actions(); track action.label) {
                      @if (shouldShowAction(action, row)) {
                        <button
                          [class]="getActionClasses(action.variant)"
                          [title]="action.label"
                          (click)="executeAction(action, row)"
                        >
                          <span class="material-symbols-outlined text-[20px]">{{
                            action.icon
                          }}</span>
                        </button>
                      }
                    }
                  </div>
                </td>
              }
            </tr>
          }
        }
      </tbody>
    </table>
  </div>
  @if (hasPagination() && !isLoading()) {
    <!-- Pagination -->
    <div
      class="flex flex-col sm:flex-row items-center justify-between p-4 border-t border-gray-100 dark:border-gray-800 gap-4"
    >
      <p class="text-sm text-text-muted">
        {{ getPaginationText() }}
      </p>
      <div class="flex items-center gap-2">
        <button
          class="px-3 py-1.5 rounded-lg border border-gray-200 dark:border-gray-700 text-sm font-medium text-text-muted hover:bg-gray-50 dark:hover:bg-white/5 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
          [disabled]="!canGoPrevious()"
          (click)="goToPrevious()"
        >
          Anterior
        </button>
        <div class="hidden sm:flex gap-1">
          @for (page of getPages(); track page) {
            <button
              class="size-8 rounded-lg text-sm font-medium flex items-center justify-center transition-colors"
              [class.bg-primary]="pagination()?.currentPage === page"
              [class.text-white]="pagination()?.currentPage === page"
              [class.font-bold]="pagination()?.currentPage === page"
              [class.hover:bg-gray-50]="pagination()?.currentPage !== page"
              [class.dark:hover:bg-white/5]="pagination()?.currentPage !== page"
              [class.text-text-muted]="pagination()?.currentPage !== page"
              (click)="goToPage(page)"
            >
              {{ page + 1 }}
            </button>
          }
          @if (
            getPages().length > 0 &&
            getPages()[getPages().length - 1] < (pagination()?.totalPages ?? 0) - 1
          ) {
            <span class="size-8 flex items-center justify-center text-text-muted">...</span>
          }
        </div>
        <button
          class="px-3 py-1.5 rounded-lg border border-gray-200 dark:border-gray-700 text-sm font-medium text-[#111814] dark:text-white hover:bg-gray-50 dark:hover:bg-white/5 hover:border-gray-300 dark:hover:border-gray-600 transition-colors"
          [disabled]="!canGoNext()"
          (click)="goToNext()"
        >
          Próximo
        </button>
      </div>
    </div>
  }
</div>
